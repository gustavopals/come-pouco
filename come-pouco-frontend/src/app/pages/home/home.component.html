<section class="page-shell">
  <mat-toolbar color="primary" class="app-toolbar">
    <strong>Come Pouco</strong>
    <span class="toolbar-spacer"></span>
    <a mat-button routerLink="/home" routerLinkActive="nav-link-active">Home</a>
    <a mat-button routerLink="/users" routerLinkActive="nav-link-active" *ngIf="authService.isAdmin()">Usuários</a>
    <a mat-button routerLink="/affiliate-links" routerLinkActive="nav-link-active">Links Afiliados</a>
    <button mat-flat-button color="warn" type="button" (click)="logout()">Sair</button>
  </mat-toolbar>

  <main class="page-main">
    <mat-card class="welcome-card" appearance="outlined">
      <mat-card-header>
        <mat-card-title>Painel Inicial</mat-card-title>
        <mat-card-subtitle>Visão geral da operação Come Pouco</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <p *ngIf="!errorMessage">
          Bem-vindo,
          <strong>{{ authService.currentUser()?.fullName || 'Usuário' }}</strong>
          ({{ authService.currentUser()?.email }}) -
          perfil <strong>{{ authService.currentUser()?.role === 'ADMIN' ? 'Administrador' : 'Usuário padrão' }}</strong>.
        </p>

        <p class="status-error" *ngIf="errorMessage">{{ errorMessage }}</p>

        <mat-chip-set>
          <mat-chip routerLink="/users" *ngIf="authService.isAdmin()">Gestão de usuários</mat-chip>
          <mat-chip routerLink="/affiliate-links">Gestão de afiliados</mat-chip>
        </mat-chip-set>
      </mat-card-content>

      <mat-card-actions>
        <a mat-stroked-button routerLink="/users" *ngIf="authService.isAdmin()">Ir para usuários</a>
        <a mat-flat-button color="primary" routerLink="/affiliate-links">Ir para afiliados</a>
      </mat-card-actions>
    </mat-card>
  </main>
</section>
